/* ==========================================================================
   Sudoku â€” style.css (fixed: compact header, theme toggle reliability, mobile-like desktop)
   ========================================================================== */

/* -----------------------------
   CSS Variables (Light theme default)
   ----------------------------- */
:root {
  --bg: #ffffff;
  --bg-soft: #f6f7f9;
  --panel: #ffffff;
  --border: #e5e7eb;
  --text: #111827;
  --muted: #6b7280;
  --primary: #2563eb;
  --primary-ghost: rgba(37, 99, 235, 0.08);
  --accent: #0ea5e9;
  --danger: #ef4444;
  --ok: #059669;
  --shadow: 0 1px 2px rgba(0,0,0,.06), 0 8px 24px rgba(0,0,0,.06);

  --cell-size: 48px;          /* base cell size (desktop) */
  --cell-gap: 4px;            /* gap antar sel */
  --radius: 8px;              /* rounding */
  --font: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
  --container-max: 680px;     /* lebih sempit supaya desktop mirip mobile */
  --board-size: min(86vw, 460px); /* board lebih compact */
}

/* Explicit dark theme via toggle (JS sets data-theme="dark" on documentElement) */
/* Include multiple selectors to ensure JS toggles are applied reliably */
:root[data-theme="dark"],
html[data-theme="dark"],
body[data-theme="dark"],
.dark {
  --bg: #0b0f14;
  --bg-soft: #10161d;
  --panel: #0f141a;
  --border: #1f2937;
  --text: #e5e7eb;
  --muted: #9ca3af;
  --primary: #60a5fa;
  --primary-ghost: rgba(96, 165, 250, 0.15);
  --accent: #38bdf8;
  --danger: #f87171;
  --ok: #34d399;
  --shadow: 0 1px 2px rgba(0,0,0,.4), 0 10px 30px rgba(0,0,0,.35);
}

/* -----------------------------
   Base
   ----------------------------- */
*,
*::before,
*::after { box-sizing: border-box; }

html, body { height: 100%; }

body {
  margin: 0;
  font-family: var(--font);
  background: var(--bg);
  color: var(--text);
  line-height: 1.35;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* container narrower to look like mobile even on desktop */
.container {
  max-width: var(--container-max);
  margin: 0 auto;
  padding: 12px;
}

/* small helpers */
.visually-hidden {
  position: absolute !important;
  height: 1px; width: 1px;
  overflow: hidden; clip: rect(1px,1px,1px,1px);
  white-space: nowrap;
}

/* -----------------------------
   Header & Controls (lebih kecil)
   ----------------------------- */
.site-header {
  position: sticky;
  top: 0;
  z-index: 20;
  background: var(--bg);
  border-bottom: 1px solid var(--border);
  backdrop-filter: blur(6px);
}

.header-inner {
  display: flex;
  align-items: center;
  gap: 6px;               /* lebih rapat */
  justify-content: space-between;
  padding: 6px 6px;       /* lebih kecil */
  height: 44px;           /* lebih pendek */
  box-sizing: border-box;
  min-height: 44px;
}

/* title lebih kecil */
.title {
  margin: 0;
  font-size: 0.95rem;
  font-weight: 700;
  letter-spacing: .15px;
  display: flex;
  align-items: center;
  gap: 6px;
}

/* controls tetap satu baris; tombol lebih kecil */
.controls {
  display: flex;
  gap: 6px;
  align-items: center;
  flex-wrap: nowrap;
  overflow-x: auto;
  padding-bottom: 0;
  -webkit-overflow-scrolling: touch;
  -ms-overflow-style: none;  /* IE/Edge */
  scrollbar-width: none;     /* Firefox */
}
.controls::-webkit-scrollbar { display: none; } /* Chrome/Safari */

/* kontrol ukuran kecil */
select,
button {
  appearance: none;
  border: 1px solid var(--border);
  background: var(--panel);
  color: var(--text);
  border-radius: 6px;          /* sedikit lebih kecil */
  padding: 4px 8px;           /* padding dikurangi */
  font: 500 0.85rem/1 var(--font);
  height: 32px;               /* konsisten tinggi */
  cursor: pointer;
  transition: background .12s ease, border-color .12s ease, transform .06s ease;
  white-space: nowrap;
}

/* fokus & hover (tetap jelas untuk aksesibilitas) */
select:focus,
button:focus {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}
button:hover { background: var(--bg-soft); }
button:active { transform: translateY(1px); }

/* states kecil */
#toggle-pencil.active {
  border-color: var(--primary);
  box-shadow: inset 0 0 0 2px var(--primary-ghost);
  background: var(--primary-ghost);
}
#toggle-theme[aria-pressed="true"] {
  border-color: var(--accent);
  box-shadow: inset 0 0 0 2px var(--primary-ghost);
  background: var(--primary-ghost);
}


/* -----------------------------
   Info bar (compact)
   ----------------------------- */
.info-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  padding: 8px 10px;
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 8px;
  box-shadow: var(--shadow);
  margin: 12px 0;
  font-size: .95rem;
}

.status { display:flex; gap:10px; align-items:center; font-weight:600; }
#timer { font-variant-numeric: tabular-nums; }
#mistakes { color: var(--muted); font-weight:700; }
.instructions { color: var(--muted); font-size: .9rem; }

/* -----------------------------
   Game layout (mobile-like on desktop)
   ----------------------------- */
main.container {
  display: grid;
  grid-template-columns: 1fr;
  gap: 12px;
}

.game { display:grid; gap:12px; }

/* smaller, compact board */
.sudoku-board {
  width: var(--board-size);
  aspect-ratio: 1 / 1;
  margin: 0 auto;
  display: grid;
  grid-template-columns: repeat(9, 1fr);
  grid-auto-rows: 1fr;
  gap: var(--cell-gap);
  padding: 8px;
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 8px;
  box-shadow: var(--shadow);
  position: relative;
}

/* 3x3 separators simplified */
.sudoku-board::before,
.sudoku-board::after {
  content: "";
  position: absolute;
  inset: 8px;
  pointer-events: none;
  border-radius: 6px;
  background:
    linear-gradient(to right, transparent calc((100%/3) - 1px), var(--border) calc((100%/3) - 1px), var(--border) calc((100%/3) + 1px), transparent calc((100%/3) + 1px),
                               transparent calc((200%/3) - 1px), var(--border) calc((200%/3) - 1px), var(--border) calc((200%/3) + 1px), transparent calc((200%/3) + 1px)) ,
    linear-gradient(to bottom, transparent calc((100%/3) - 1px), var(--border) calc((100%/3) - 1px), var(--border) calc((100%/3) + 1px), transparent calc((100%/3) + 1px),
                               transparent calc((200%/3) - 1px), var(--border) calc((200%/3) - 1px), var(--border) calc((200%/3) + 1px), transparent calc((200%/3) + 1px));
  z-index: 0;
  opacity: .95;
}

/* cell wrapper compact */
.cell-wrapper { position: relative; z-index: 1; border-radius: 6px; overflow: hidden; }

/* cell style */
.cell {
  width: 100%;
  height: 100%;
  display: grid;
  place-items: center;
  border: 1px solid var(--border);
  background: var(--bg);
  color: var(--text);
  font-weight: 700;
  font-size: clamp(16px, 3.4vw, 20px);
  text-align: center;
  padding: 0;
  cursor: default;
}

.cell.given { background: var(--bg-soft); font-weight:800; color:var(--text); }
.cell:focus { outline: 2px solid var(--accent); outline-offset: -2px; }

/* notes/pencil */
.notes {
  position: absolute; inset: 0;
  display: grid; grid-template-columns: repeat(3,1fr); grid-auto-rows: 1fr;
  pointer-events: none; font-size: clamp(9px, 1.6vw, 11px); color:var(--muted);
}
.note { display:grid; place-items:center; opacity:.9; }

/* highlight styles */
.cell-wrapper.highlight-row .cell,
.cell-wrapper.highlight-col .cell,
.cell-wrapper.highlight-block .cell {
  background: color-mix(in oklab, var(--bg) 86%, var(--primary) 14%);
}
.cell-wrapper.highlight .cell { border-color: var(--accent); }

/* invalid */
.cell.invalid { border-color: var(--danger); color: var(--danger); animation: wiggle .22s ease; }
@keyframes wiggle { 0%{transform:translateX(0)}25%{transform:translateX(-4px)}50%{transform:translateX(3px)}100%{transform:translateX(0)} }

/* message */
.message { min-height: 18px; text-align:center; color:var(--muted); font-size:.95rem; }

/* side panel */
.side-panel { display:grid; gap:8px; }
.leaderboard { background:var(--panel); border:1px solid var(--border); border-radius:8px; padding:8px; }

/* -----------------------------
   Digit bank (default 5 columns like mobile)
   ----------------------------- */
.digit-bank {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 8px;
  align-items: stretch;
  padding: 6px 4px;
}

.digit-btn {
  display: grid; grid-template-rows: auto auto; place-items:center;
  gap: 2px; padding:8px; border-radius:8px; border:1px solid var(--border);
  background:var(--panel); color:var(--text); cursor:pointer; user-select:none;
  transition: transform .06s ease, background .12s ease;
}
.digit-btn:hover { background: var(--bg-soft); }
.digit-btn:active { transform: translateY(1px); }
.digit-btn[disabled] { opacity:.5; cursor:not-allowed; }
.digit-btn .digit { font-weight:800; font-size:1rem; }
.digit-btn .count { font-size:.75rem; color:var(--muted); font-variant-numeric:tabular-nums; }
.count-update { animation: bump .24s ease; }
@keyframes bump { 0%{transform:scale(1)}50%{transform:scale(1.12)}100%{transform:scale(1)} }

/* erase */
#erase-btn { border-color:var(--border); }

/* footer */
.site-footer { margin-top:12px; padding:12px 0 20px; color:var(--muted); border-top:1px solid var(--border); }

/* no-js fallback */
.noscript-warning { margin:12px; padding:10px; background:var(--danger); color:#fff; border-radius:8px; }

/* responsive: keep mobile-like look but tweak small screens */
@media (max-width: 420px) {
  .container { padding:10px; }
  .header-inner { height:48px; padding:6px; gap:6px; }
  select, button { padding:6px 8px; font-size:.95rem; }
  .sudoku-board { width: min(96vw, 420px); padding:6px; }
  .digit-bank { grid-template-columns: repeat(5,1fr); gap:6px; }
}

/* print minimal */
@media print {
  .site-header, .info-bar, .side-panel, .digit-bank, .site-footer { display:none !important; }
  .sudoku-board { --size: 18cm; box-shadow:none; background:#fff; border:none; }
  .cell { background:#fff; color:#000; border:1px solid #000; }
}
