/* style.css - Fixed: grid lines via overlays + exact font sizing to match Flutter look */

/* -------------------------
   Variables
   ------------------------- */
:root{
  --bg: #FDF9F4;
  --cell-bg: #ffffff;
  --muted-bg: #F6F6F6;
  --line-color: #000; /* pure black for all lines */
  --thin: 1px;        /* actual pixels â€” JS will use these values */
  --thick: 3px;       /* separator for 3x3 */
  --cell-gap: 0;
  --board-max: 92vmin;

  /* sizes tuned to match Flutter scale */
  --cell-font: 72px;          /* target desktop; CSS will clamp for small screens below */
  --cell-font-min: 28px;      /* smallest usable on tiny screens */
  --digit-tile-h: 64px;       /* height of digit tiles */
  --digit-font: 36px;
}

/* responsive scaling for small screens */
@media (max-width: 560px) {
  :root{
    --cell-font: 44px;
    --digit-tile-h: 56px;
    --digit-font: 28px;
  }
}

/* -------------------------
   Base
   ------------------------- */
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:var(--bg);font-family: Inter, "Segoe UI", Roboto, "Helvetica Neue", Arial, system-ui, -apple-system; color:#000}
.container{width:100%;max-width:1100px;margin:0 auto;padding:0 12px}

/* app shell layout */
.app-shell{display:flex;flex-direction:column;min-height:100vh}

/* top controls */
.top-controls-inner{display:flex;align-items:center;height:44px}
.controls-row{margin-left:auto;display:flex;gap:10px;align-items:center}

/* control visuals */
.ctrl-btn{background:transparent;border:0;padding:6px 8px;font-size:20px;cursor:pointer;color:var(--line-color)}
.ctrl-chip{display:inline-grid;place-items:center;width:46px;height:34px;border-radius:10px;border:0;background:transparent;font-weight:900;font-size:16px;cursor:pointer}
.ctrl-chip.selected,.ctrl-chip[aria-pressed="true"]{background:var(--line-color);color:#fff}

/* info row */
.info-row{width:100%;display:flex;justify-content:center;margin:8px 0}
.info-inner{display:flex;align-items:center;gap:12px;font-weight:600}
.timer{font-variant-numeric:tabular-nums;font-size:14px}
.mistakes{font-size:14px}

/* -------------------------
   Board container
   ------------------------- */
.sudoku-board {
  --size: min(var(--board-max), 92vmin);
  width: var(--size);
  height: var(--size);
  margin: 0 auto;
  position: relative;
  display: grid;
  grid-template-columns: repeat(9, 1fr);
  grid-template-rows: repeat(9, 1fr);
  gap: var(--cell-gap);
  background: var(--cell-bg);
  overflow: visible;
  user-select: none;
}

/* grid cell wrapper (no borders here) */
.cell-wrapper {
  position: relative;
  display:flex;
  align-items:center;
  justify-content:center;
  background: var(--cell-bg);
  width:100%;
  height:100%;
  padding:0;
  margin:0;
}

/* cell "label" (readonly input used visually) */
.cell {
  width:100%;
  height:100%;
  border:0;
  margin:0;
  padding:0;
  text-align:center;
  font-variant-numeric: tabular-nums;
  font-size: clamp(var(--cell-font-min), 6.8vmin, var(--cell-font));
  line-height: 1;
  font-weight:500; /* user input weight; fixed/given will override */
  color: #000;
  background: transparent;
  caret-color: transparent;
  outline: none;
  pointer-events:none; /* clicking handled by wrapper */
}

/* fixed/given numbers */
.cell.fixed { font-weight: 700 }

/* selected overlay */
.cell-wrapper.selected::after {
  content: "";
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.04); /* subtle fill like Flutter */
  pointer-events: none;
}

/* conflict style */
.cell-wrapper.has-conflict .cell,
.cell-wrapper.has-conflict { color: #d32f2f }

/* notes (small 3x3 inside cell) */
.notes {
  position: absolute;
  inset: 6%;
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  grid-template-rows: repeat(3, 1fr);
  gap: 2px;
  font-size: clamp(8px, 1.6vmin, 12px);
  color: rgba(0,0,0,0.6);
  align-items: center;
  justify-items: center;
  visibility: hidden;
  pointer-events: none;
}
.cell-wrapper.note-mode .notes { visibility: visible }

/* small note tile */
.note{display:grid;place-items:center;font-weight:600;width:100%;height:100%}

/* -------------------------
   Grid lines overlays (created by JS) -- styling
   ------------------------- */
.grid-line {
  position:absolute;
  background: var(--line-color);
  pointer-events: none;
  z-index: 6; /* on top of cell text */
  will-change: transform, opacity;
}
.grid-line.vertical { height:100%; top:0; }
.grid-line.horizontal { width:100%; left:0; }

/* for thick separators add class .thick (JS will set) */
.grid-line.thick { background: var(--line-color); }

/* overlay box / row / col highlights (JS controls positioning & opacity) */
.overlay-highlight { position:absolute; pointer-events:none; z-index:4; }
.overlay-highlight.row, .overlay-highlight.col { background: rgba(0,0,0,0.12); transition: opacity 180ms ease; }
.overlay-highlight.box { background: rgba(0,0,0,0.92); opacity: 0.06; transition: opacity 180ms ease; }

/* completion pulse: JS will add .pulse class on board or overlay element */
@keyframes completePulse {
  0%{ box-shadow:0 0 0 0 rgba(60,180,75,0.28); }
  70%{ box-shadow:0 0 0 24px rgba(60,180,75,0.06); }
  100%{ box-shadow:0 0 0 0 rgba(60,180,75,0); }
}
.pulse { animation: completePulse 560ms ease-out; }

/* -------------------------
   Digit bank (two rows)
   ------------------------- */
.digit-bank { width:100%; max-width:1100px; margin:8px auto 0; display:flex; flex-direction:column; gap:8px; align-items:center; }
.digit-row { display:flex; gap:8px; justify-content:center; align-items:center; }
.digit-btn {
  width: var(--digit-tile-h);
  height: var(--digit-tile-h);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  border-radius:6px;
  border:0;
  background:var(--cell-bg);
  cursor:pointer;
  padding:6px;
  box-shadow:none;
  -webkit-tap-highlight-color: transparent;
}
.digit-btn:active{ transform: scale(.98); }
.digit-btn[aria-pressed="true"]{ background: rgba(0,0,0,0.02) }
.digit{ font-size: var(--digit-font); font-weight:900; line-height:1; font-family: inherit; }
.count{ font-size:12px; margin-top:4px; font-weight:700; color: rgba(0,0,0,0.55) }

/* erase button matches tile size */
.erase-btn{ width: var(--digit-tile-h); height: var(--digit-tile-h); border-radius:6px; border:0; background:transparent; font-size:20px; cursor:pointer }

/* -------------------------
   Footer
   ------------------------- */
.footer-controls{ width:100%; margin-top:12px }
.footer-inner{ display:flex; align-items:center; gap:8px }
.left-controls{ display:flex; gap:8px; align-items:center }
.icon-btn{ background:transparent; border:0; font-size:20px; cursor:pointer }

/* misc */
.hidden{display:none!important}
.visually-hidden{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap}
